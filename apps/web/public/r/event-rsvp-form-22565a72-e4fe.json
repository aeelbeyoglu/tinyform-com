{
  "$schema": "https://ui.shadcn.com/schema/registry.json",
  "homepage": "https://formcn.dev",
  "author": "formcn (https://formcn.dev)",
  "name": "event-rsvp-form",
  "dependencies": [
    "react-hook-form",
    "zod",
    "@hookform/resolvers",
    "motion",
    "next-safe-action"
  ],
  "registryDependencies": [
    "field",
    "input",
    "textarea",
    "popover",
    "calendar",
    "radio-group",
    "@formcn/server-action"
  ],
  "type": "registry:block",
  "files": [
    {
      "path": "components/event-rsvp-form.tsx",
      "content": "\n\"use client\"\nimport * as z from \"zod\"\nimport { formSchema } from '@/lib/form-schema'\nimport { serverAction } from '@/actions/server-action'\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { useForm, Controller } from \"react-hook-form\"\nimport { useAction } from \"next-safe-action/hooks\"\nimport { motion } from \"motion/react\"\nimport { Check } from \"lucide-react\"\nimport { Field, FieldGroup, FieldContent, FieldLabel, FieldDescription, FieldError, FieldSeparator } from \"@/components/ui/field\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { format } from \"date-fns\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\nimport { cn } from \"@/lib/utils\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport { Calendar as CalendarIcon, X } from \"lucide-react\"\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\nimport { Label } from '@/components/ui/label'\n\n\n\ntype Schema = z.infer<typeof formSchema>;\n\nexport function DraftForm() {\n\nconst form = useForm<Schema>({\n  resolver: zodResolver(formSchema as any),\n})\nconst formAction = useAction(serverAction, {\n  onSuccess: () => {\n    // TODO: show success message\n    form.reset();\n  },\n  onError: () => {\n  // TODO: show error message\n  },\n});\nconst handleSubmit = form.handleSubmit(async (data: Schema) => {\n    formAction.execute(data);\n  });\n\nconst { isExecuting, hasSucceeded } = formAction;\n  if (hasSucceeded) {\n    return (<div className=\"p-2 sm:p-5 md:p-8 w-full rounded-md gap-2 border\">\n        <motion.div\n          initial={{ opacity: 0, y: -16 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.4, stiffness: 300, damping: 25 }}\n          className=\"h-full py-6 px-3\"\n        >\n          <motion.div\n            initial={{ scale: 0.5 }}\n            animate={{ scale: 1 }}\n            transition={{\n              delay: 0.3,\n              type: \"spring\",\n              stiffness: 500,\n              damping: 15,\n            }}\n            className=\"mb-4 flex justify-center border rounded-full w-fit mx-auto p-2\"\n          >\n            <Check className=\"size-8\" />\n          </motion.div>\n          <h2 className=\"text-center text-2xl text-pretty font-bold mb-2\">\n            Thank you\n          </h2>\n          <p className=\"text-center text-lg text-pretty text-muted-foreground\">\n            Form submitted successfully, we will get back to you soon\n          </p>\n        </motion.div>\n      </div>)\n  }\nreturn (\n      <form onSubmit={handleSubmit} className=\"flex flex-col p-2 sm:p-5 md:p-8 w-full rounded-md gap-2 border\">\n        <FieldGroup>\n          \n        <Controller\n          name=\"attendee_name\"\n          control={form.control}\n          render={({ field, fieldState }) => (\n            <Field data-invalid={fieldState.invalid} className=\"gap-1\">\n            <FieldLabel htmlFor=\"attendee_name\">Your Name </FieldLabel>\n              <Input\n                {...field}\n                id=\"attendee_name\"\n                type=\"text\"\n                onChange={(e) => {\n                field.onChange(e.target.value)\n                }}\n                aria-invalid={fieldState.invalid}\n                placeholder=\"Enter your name\"\n                \n              />\n              \n              {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n            </Field>\n          )}\n        />\n\n        <Controller\n          name=\"email\"\n          control={form.control}\n          render={({ field, fieldState }) => (\n            <Field data-invalid={fieldState.invalid} className=\"gap-1\">\n            <FieldLabel htmlFor=\"email\">Email Address </FieldLabel>\n              <Input\n                {...field}\n                id=\"email\"\n                type=\"text\"\n                onChange={(e) => {\n                field.onChange(e.target.value)\n                }}\n                aria-invalid={fieldState.invalid}\n                placeholder=\"Enter your email address\"\n                \n              />\n              \n              {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n            </Field>\n          )}\n        />\n\n        <Controller\n          name=\"phone\"\n          control={form.control}\n          render={({ field, fieldState }) => (\n            <Field data-invalid={fieldState.invalid} className=\"gap-1\">\n            <FieldLabel htmlFor=\"phone\">Phone Number </FieldLabel>\n              <Input\n                {...field}\n                id=\"phone\"\n                type=\"text\"\n                onChange={(e) => {\n                field.onChange(e.target.value)\n                }}\n                aria-invalid={fieldState.invalid}\n                placeholder=\"Enter your phone number\"\n                \n              />\n              \n              {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n            </Field>\n          )}\n        />\n\n        <Controller\n          name=\"num_guests\"\n          control={form.control}\n          render={({ field, fieldState }) => (\n            <Field data-invalid={fieldState.invalid} className=\"gap-1\">\n            <FieldLabel htmlFor=\"num_guests\">Number of Guests </FieldLabel>\n              <Input\n                {...field}\n                id=\"num_guests\"\n                type=\"number\"\n                onChange={(e) => {\n                field.onChange(e.target.valueAsNumber)\n                }}\n                aria-invalid={fieldState.invalid}\n                placeholder=\"Enter number of guests\"\n                \n              />\n              \n              {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n            </Field>\n          )}\n        />\n\n          <Controller\n              name=\"special_requirements\"\n              control={form.control}\n              render={({ field, fieldState }) => (\n                <Field data-invalid={fieldState.invalid} className=\"gap-1\">\n                <FieldLabel htmlFor=\"special_requirements\">Special Requirements or Comments </FieldLabel>\n                  <Textarea\n                    {...field}\n                    aria-invalid={fieldState.invalid}\n                    id=\"special_requirements\"\n                    placeholder=\"Enter any special requirements or comments\"\n                    \n                  />\n                  \n                  {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n                </Field>\n              )}\n            />\n\n        <Controller\n          name=\"event_date\"\n          control={form.control}\n          render={({ field, fieldState }) => {\n            const selectedDate = field.value;\n            const mode =  \"single\";\n            return (\n              <Field data-invalid={fieldState.invalid}>\n                <FieldLabel htmlFor=\"event_date\">Event Date/Time </FieldLabel>\n                \n                <Popover>\n                  <PopoverTrigger asChild>\n                    <div className=\"relative\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        className={cn(\n                          \"w-full justify-start text-start font-normal active:scale-none\",\n                          !selectedDate && \"text-muted-foreground\"\n                        )}\n                      >\n                        <CalendarIcon className=\"size-4\" />\n                            {selectedDate ? (\n                              <>\n                                \n                                {format(selectedDate, \"dd MMM, yyyy\")}\n                                \n                                \n                              </>\n                            ) : (\n                              <span>Select event date and time</span>\n                            )}\n                              </Button>\n                            {fieldState.isDirty && (\n                              <Button\n                                type=\"button\"\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"absolute top-1/2 -end-0 -translate-y-1/2 rounded-full\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  form.resetField(event_date);\n                                }}\n                              >\n                                <X />\n                              </Button>\n                            )}\n                    </div>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={selectedDate}\n                      onSelect={(newDate) => {\n                        form.setValue(field.name, newDate, {\n                          shouldDirty: true,\n                          });\n                        }}\n                      \n                    />\n                  </PopoverContent>\n                </Popover>\n                {fieldState.invalid && (\n                  <FieldError errors={[fieldState.error]} />\n                )}\n              </Field>\n            );\n          }}\n        />\n\n        <Controller\n          name=\"attendance\"\n          control={form.control}\n          render={({ field, fieldState }) => {\n          const options = [{\"label\":\"Yes\",\"value\":\"yes\"},{\"label\":\"No\",\"value\":\"no\"},{\"label\":\"Maybe\",\"value\":\"maybe\"}];\n            return(\n              <Field data-invalid={fieldState.invalid} className=\"gap-1 [&_p]:pb-2\">\n                <FieldLabel htmlFor=\"attendance\">Will you attend? </FieldLabel>\n                \n                <RadioGroup\n                  value={field.value}\n                  onValueChange={field.onChange}\n                  aria-invalid={fieldState.invalid}\n                  \n                >\n                  {options.map(({ label, value }) => (\n                    <div\n                      key={value}\n                      className=\"flex items-center gap-x-2\"\n                    >\n                      <RadioGroupItem value={value} id={value} />\n                      <Label htmlFor={value}>{label}</Label>\n                    </div>\n                  ))}\n                </RadioGroup>\n                {fieldState.invalid && <FieldError errors={[fieldState.error]} />}\n              </Field>\n            )}}\n        />\n          <div className=\"flex justify-end items-center w-full pt-3\">\n            <Button className=\"rounded-lg\" size=\"sm\">\n              {isExecuting ? 'Submitting...' : 'Submit'}\n            </Button>\n          </div>\n        </FieldGroup>\n      </form>\n)}",
      "type": "registry:component",
      "target": ""
    },
    {
      "path": "lib/form-schema.ts",
      "content": "\n  import * as z from \"zod\"\n\n  export interface ActionResponse<T = any> {\n      success: boolean\n      message: string\n      errors?: {\n          [K in keyof T]?: string[]\n      }\n      inputs?: T\n  }\n  export const formSchema = z.object({\n\"attendee_name\": z.string({ error: 'This field is required' }).optional(),\n\"email\": z.email({error: 'Please enter a valid email'}).optional(),\n\"phone\": z.coerce.number({error: 'Please enter a valid phone number'}).optional(),\n\"num_guests\": z.coerce.number({error: 'Please enter a valid number'}).optional(),\n\"special_requirements\": z.string({ error: 'This field is required' }).optional(),\n\"event_date\": z.date({error: 'This field is required'}).optional(),\n\"attendance\": z.string().min(1, 'Please select an item').optional()\n});",
      "type": "registry:lib",
      "target": ""
    }
  ]
}